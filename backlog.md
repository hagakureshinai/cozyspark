# Cozy Spark バックログ（Astro最適化版・修正）

### 凡例
- [P0]：これがないと公開できない（MVP：最小機能製品）
- [P1]：あると理想（公開前後で対応）
- [P2]：後回しOK（運用が乗ってから、または将来）

## EPIC 1: プロジェクト初期セットアップ & プラグイン導入
- [x] [P0] リポジトリ作成・GitHub Pages デプロイ環境の構築（Astro公式のDeploy Action利用）
- [x] [P0] ディレクトリ構成の整理（`src/content/works` と `src/content/episodes` の分離）
- [x] [P0] Astro Content Collections の型定義（Schema設定）
  - [x] Works：タイトル、カテゴリ（シリーズ/単発等）、状態（連載/完結）、表示順（order）の定義
  - [x] Episodes：タイトル、所属作品ID、章番号、公開日の定義
- [x] [P0] nola記法対応：ルビ変換プラグインの導入・設定
- [ ] [P1] README作成（執筆・デプロイ・新しい話を追加する時の手順メモ）

## EPIC 2: サイト基本構造・ナビゲーション（Astroロジック）
- [x] [P0] クッションページ（`src/pages/index.astro`）の実装
- [x] [P0] 全作品一覧ページ（`src/pages/works/index.astro`）の実装
  - [x] 「シリーズ」「単発」「掌編」でグループ分けして表示するロジック
  - [x] 各グループ内での並び替えロジックの実装（Frontmatterのorder基準）
  - [x] 最新更新バッジ（UP）の表示判定ロジック
- [x] [P0] 作品ごとの目次ページの自動生成
- [x] [P0] 小説本文ページの動的生成
  - [x] 同一作品内での「前へ」「次へ」ナビゲーションの自動計算
  - [x] ヘッダー（サイトタイトル＝目次へ）の共通Layout実装
- [x] [P0] プライバシーポリシー／免責事項ページの作成
- [x] [P0] 404エラーページの作成

## EPIC 3: 小説表示・読書補助・しおり機能
- [x] [P0] 本文レイアウト実装（行間・段落間・字下げ・行長・スマホ最適化）
- [x] [P0] ヘッダー、フッターの固定
- [ ] [P1] タイポグラフィ基礎設計（文庫本を意識した文字サイズ比・行高）
- [ ] [P1] フォント指定＋フォールバック（游明朝 → serif → sans-serif）
- [ ] [P1] ルビ（`<ruby>`）および傍点（`text-emphasis`）のCSSスタイリング
- [ ] [P1] **読書補助設定パネルの実装（Astro Islands / Vanilla JS）**
  - [ ] 文字サイズ変更（3段階）
  - [ ] 配色切り替え（ライト / ダーク）
  - [ ] フォント切り替え（明朝体 / ゴシック体）
  - [ ] LocalStorageへの保存とページ遷移後の自動適用
- [ ] [P1] **簡易しおり機能の実装**
  - [ ] 閲覧中のURLと作品タイトルをLocalStorageに保存するスクリプト
  - [ ] トップページ等に「最後に読んだ続きから読む」ボタンを表示
- [ ] [P1] 読書補助設定：セピアテーマの追加

## EPIC 4: デザイン・トーン＆マナー、そのほか補足
- [x] [P0] 作品一覧ページのレイアウト再考（導線を見直す）
- [x] [P0] 作品一覧ページに各ストーリーのあらすじ掲載
- [ ] [P1] 作品ごとの目次ページに各話のあらすじ掲載
- [ ] [P1] About meページ作成（自己紹介）
  - [ ] X・noteへのリンクを掲載する
  - [ ] 更新履歴欄もこのページに作成する
- [ ] [P1] **Astro `<Image />` コンポーネントによる画像管理**
  - [ ] イメージ画像の配置スロット作成と自動最適化（WebP変換）
- [ ] [P2] 問い合わせ＆感想フォーム設置
- [ ] [P2] サイトロゴ作成（クッションページ用・大、ヘッダー用・小）
  - [ ] サイト全体の配色もここでロゴと合わせて再考する
- [ ] [P2] 縦書きへの切り替え対応（CSS writing-mode）の検討・検証

## EPIC 5: SEO・メタデータ
- [ ] [P2] 共通OGP画像（サイトロゴベース）の設定
- [ ] [P2] 作品別OGP画像の個別指定機能（Frontmatterからの参照）
- [x] [P0] `@astrojs/sitemap` によるサイトマップ自動生成設定
- [x] [P0] Google Search Console 所有権確認・サイトマップ送信
- [ ] [P1] JSON-LD（構造化データ）による小説情報のマークアップ
- [x] [P0] Google Analytics 4 (GA4) 埋め込み
- [ ] [P1] 特定ページ（R18リンク等）へのnoindex設定

## EPIC 6: コンテンツ管理・運用
- [ ] [P0] **nola原稿のMarkdown化ルール策定**
  - [ ] ファイル名の命名規則、Frontmatterの記述テンプレート作成
- [ ] [P0] 3,000〜4,000文字の分割ルール策定（「執筆時にファイルを分ける」運用ルールにする）
- [ ] [P0] 外部サイト（BOOTH等）へのリンクボタンコンポーネント作成
- [ ] [P1] SNSシェアボタン（X等）の設置